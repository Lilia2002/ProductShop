{% extends 'base.html.twig' %}

{% block body %}
<div class="container">
    <div class="row">
        <div class="row align-items-center py-1 py-lg-5">
            <div class=""><img class="d-block rounded-3" src="{{ '/uploads/product/' ~ product.img }}" alt=""></div>
            <div class="col-lg-5 col-md-6 offset-lg-1 py-6">
                <h3 class="fs-base mb-6">{{ product.name }}</h3>
                <div class="star-rating">
                    <i class="bi bi-star{% if product.rating >= 1 %}-fill{% endif %}"></i>
                    <i class="bi bi-star{% if product.rating >= 2 %}-fill{% endif %}"></i>
                    <i class="bi bi-star{% if product.rating >= 3 %}-fill{% endif %}"></i>
                    <i class="bi bi-star{% if product.rating >= 4 %}-fill{% endif %}"></i>
                    <i class="bi bi-star{% if product.rating >= 5 %}-fill{% endif %}"></i>
                    / {{ product.rating }}
                </div>
                <p class="fs-sm text-muted pb-md-2">{{ product.price/100 }} $</p>
                <h6 class="fs-base mb-6">Category</h6>
                <p class="fs-sm text-muted pb-md-2">{{ product.category.name }}</p>
                <h6 class="fs-base mb-6">Description</h6>
                <p class="fs-sm text-muted pb-md-2">{{ product.description }}</p>
                <div class="d-flex mb-1">
                    <a href="{{ path('addProductToOrder', {
                        'id': product.id
                    }) }}" class="btn btn-dark">Add</a>
                </div>
            </div>
        </div>

        <div>
            <h5>REVIEWS</h5>
        {% for review in product.reviews %}
                <div class="review">
                    <div>{{ review.user.username }}</div>
                    <div class="star-rating">
                        <i class="bi bi-star{% if review.rating >= 1 %}-fill{% endif %}"></i>
                        <i class="bi bi-star{% if review.rating >= 2 %}-fill{% endif %}"></i>
                        <i class="bi bi-star{% if review.rating >= 3 %}-fill{% endif %}"></i>
                        <i class="bi bi-star{% if review.rating >= 4 %}-fill{% endif %}"></i>
                        <i class="bi bi-star{% if review.rating >= 5 %}-fill{% endif %}"></i>
                    </div>
                    {{ review.review }}
                </div>
        {% endfor %}
        </div>
        <div class="formReview">
        {% if form is defined %}
            <div>
                <h5>LEAVE YOUR REVIEW:</h5>
                <div class="star-rating rating-selector">
                    <i class="bi bi-star" data-rating="1" ></i>
                    <i class="bi bi-star" data-rating="2"></i>
                    <i class="bi bi-star" data-rating="3"></i>
                    <i class="bi bi-star" data-rating="4"></i>
                    <i class="bi bi-star" data-rating="5"></i>
                </div>
                {{ form(form) }}
            </div>
        {% endif %}
        </div>
    </div>
</div>
{% endblock %}